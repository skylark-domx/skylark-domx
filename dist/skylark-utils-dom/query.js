/**
 * skylark-utils-dom - An Elegant HTML5 DOM utility Library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./dom","./langx","./noder","./datax","./eventer","./finder","./geom","./styler","./fx"],function(t,n,e,i,r,o,s,a,c){var l,f=Array.prototype.some,u=Array.prototype.push,h=(Array.prototype.every,Array.prototype.concat,Array.prototype.slice),p=(Array.prototype.map,Array.prototype.filter),d=Array.prototype.forEach,v=Array.prototype.indexOf,g=Array.prototype.sort,m=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,y=n.funcArg,b=n.isArrayLike,w=n.isString,A=n.uniq,x=n.isFunction,S=n.type,k=(n.isArray,n.isWindow,n.isDocument,n.isObject);n.isPlainObject,n.compact,n.flatten,n.camelCase,n.dasherize,o.children;function C(t,e){return function(){var i=h.call(arguments),r=n.map(this,function(n,r){return t.apply(e,[n].concat(i))});return q(A(r))}}function O(t,n,e){return function(i){h.call(arguments);var r=this.map(function(r,o){if(o.querySelector)return t.apply(n,e?[o]:[o,i])});return e&&i?r.filter(i):r}}function E(t,n){return function(){var e=h.call(arguments);return this.each(function(i,r){t.apply(n,[this].concat(e))}),this}}function T(t,n,e){return function(i){var r=h.call(arguments);return d.call(this,function(o,s){y(o,i,s,e(o));t.apply(n,[o,i].concat(r.slice(1)))}),this}}function j(t,e,i){return function(r,o){var s=h.call(arguments);return n.isPlainObject(r)||n.isDefined(o)?(d.call(this,function(n,a){i&&y(n,o,a,i(n,r)),t.apply(e,[n].concat(s))}),this):this[0]?t.apply(e,[this[0],r]):void 0}}function z(t,e,i){return function(r){return n.isDefined(r)?(d.call(this,function(n,o){var s;s=i?y(n,r,o,i(n)):r,t.apply(e,[n,s])}),this):this[0]?t.apply(e,[this[0]]):void 0}}var N,P=n.klass({klassName:"SkNodeList",init:function(t,i){var r,s,a,c;if(t&&(this.context=i=i||e.doc(),w(t)?(this.selector=t,(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:m.exec(t))?r[1]?(s=e.createFragment(t),n.isPlainObject(i)&&(c=i)):(a=o.byId(r[2],e.ownerDoc(i)))&&(s=[a]):(n.isString(i)&&(i=o.find(i)),s=o.descendants(i,t))):s=t!==window&&b(t)?t:[t]),s&&(u.apply(this,s),c))for(var l in c)n.isFunction(this[l])?this[l](c[l]):this.attr(l,c[l]);return this}}),q=function(){l=function(t){return t instanceof P},init=function(t,n){return new P(t,n)};var t,m,y,N=function(t,n){if(!x(t))return l(t)?t:n&&l(n)&&w(t)?n.find(t):init(t,n);r.ready(function(){t(N)})};N.fn=P.prototype,n.mixin(N.fn,{length:0,map:function(t){return N(A(n.map(this,function(n,e){return t.call(n,e,n)})))},slice:function(){return N(h.apply(this,arguments))},forEach:function(){return d.apply(this,arguments)},get:function(t){return void 0===t?h.call(this):this[t>=0?t:t+this.length]},indexOf:function(){return v.apply(this,arguments)},sort:function(){return g.apply(this,arguments)},toArray:function(){return h.call(this)},size:function(){return this.length},remove:E(e.remove,e),each:function(t){return n.each(this,t),this},filter:function(t){return x(t)?this.not(this.not(t)):N(p.call(this,function(n){return o.matches(n,t)}))},add:function(t,n){return N(A(this.toArray().concat(N(t,n).toArray())))},is:function(t){if(this.length>0){if(n.isString(t))return f.call(this,function(n){return o.matches(n,t)});if(n.isArrayLike(t))return f.call(this,function(e){return n.inArray(e,t)>-1});if(n.isHtmlNode(t))return f.call(this,function(n){return n==t})}return!1},not:function(t){var n=[];if(x(t)&&void 0!==t.call)this.each(function(e,i){t.call(this,e,i)||n.push(this)});else{var e="string"==typeof t?this.filter(t):b(t)&&x(t.item)?h.call(t):N(t);this.forEach(function(t){e.indexOf(t)<0&&n.push(t)})}return N(n)},has:function(t){return this.filter(function(){return k(t)?e.contains(this,t):N(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:O(o.descendants,o),closest:O(o.closest,o),parents:O(o.ancestors,o),parentsUntil:(t=o.ancestors,m=o,function(n,e){h.call(arguments),void 0===e&&(e=n,n=void 0);var i=this.map(function(i,r){if(r.querySelector)return t.apply(m,y?[r,n]:[r,e,n])});return y&&e?i.filter(e):i}),parent:O(o.parent,o),children:O(o.children,o),contents:C(e.contents,e),empty:E(e.empty,e),pluck:function(t){return n.map(this,function(n){return n[t]})},pushStack:function(t){var n=N(t);return n.prevObject=this,n},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=x(t);if(this[0]&&!n)var e=N(t).get(0),i=e.parentNode||this.length>1;return this.each(function(r,o){N(this).wrapAll(n?t.call(this,r,o):i?e.cloneNode(!0):e)})},wrapAll:function(t){if(this[0]){var n;for(N(this[0]).before(t=N(t));(n=t.children()).length;)t=n.first();N(t).append(this)}return this},wrapInner:function(t){var n=x(t);return this.each(function(e,i){var r=N(this),o=r.contents(),s=n?t.call(this,e,i):t;o.length?o.wrapAll(s):r.append(s)})},unwrap:function(t){return 0===this.parent().children().length?this.parent(t).not("body").each(function(){N(this).replaceWith(document.createTextNode(this.childNodes[0].textContent))}):this.parent().each(function(){N(this).replaceWith(N(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:E(c.hide,c),toggle:function(t){return this.each(function(){var n=N(this);(void 0===t?"none"==n.css("display"):t)?n.show():n.hide()})},prev:function(t){return N(this.pluck("previousElementSibling")).filter(t||"*")},prevAll:O(o.previousSibling,o),next:function(t){return N(this.pluck("nextElementSibling")).filter(t||"*")},nextAll:O(o.nextSiblings,o),siblings:O(o.siblings,o),html:z(e.html,e,e.html),text:z(i.text,i,i.text),attr:j(i.attr,i,i.attr),removeAttr:E(i.removeAttr,i),prop:j(i.prop,i,i.prop),removeProp:E(i.removeProp,i),data:j(i.data,i,i.data),removeData:E(i.removeData,i),val:z(i.val,i,i.val),offset:z(s.pagePosition,s,s.pagePosition),style:j(a.css,a),css:j(a.css,a),index:function(t){return t?this.indexOf(N(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t,n){return function(){var e=h.call(arguments);return f.call(this,function(i){return t.apply(n,[i].concat(e))})}}(a.hasClass,a),addClass:T(a.addClass,a,a.className),removeClass:T(a.removeClass,a,a.className),toggleClass:T(a.toggleClass,a,a.className),scrollTop:z(s.scrollTop,s),scrollLeft:z(s.scrollLeft,s),position:function(t){if(this.length){if(t)return t.of&&t.of.length&&((t=n.clone(t)).of=t.of[0]),this.each(function(){s.posit(this,t)});var e=this[0];return s.relativePosition(e)}},offsetParent:C(s.offsetParent,s)}),N.fn.detach=N.fn.remove,N.fn.hover=function(t,n){return this.mouseenter(t).mouseleave(n||t)},N.fn.size=z(s.size,s),N.fn.width=z(s.width,s,s.width),N.fn.height=z(s.height,s,s.height),N.fn.clientSize=z(s.clientSize,s.clientSize),["width","height"].forEach(function(t){var n=t.replace(/./,function(t){return t[0].toUpperCase()});N.fn["outer"+n]=function(n,e){if(arguments.length?"boolean"!=typeof n&&(e=n,n=!1):(n=!1,e=void 0),void 0===e){var i=this[0];if(!i)return;var r=s.size(i);if(n){var o=s.marginExtents(i);r.width=r.width+o.left+o.right,r.height=r.height+o.top+o.bottom}return"width"===t?r.width:r.height}return this.each(function(i,r){var o={},a=s.marginExtents(r);"width"===t?(o.width=e,n&&(o.width=o.width-a.left-a.right)):(o.height=e,n&&(o.height=o.height-a.top-a.bottom)),s.size(r,o)})}}),N.fn.innerWidth=z(s.clientWidth,s,s.clientWidth),N.fn.innerHeight=z(s.clientHeight,s,s.clientHeight);e.traverse;function q(t,i,r){return function(r){var o,s=n.map(arguments,function(t){return"object"==(o=S(t))||"array"==o||null==t?t:e.createFragment(t)});return s.length<1?this:(this.each(function(n){t.apply(i,[this,s,n>0])}),this)}}return N.fn.after=q(e.after,e),N.fn.prepend=q(e.prepend,e),N.fn.before=q(e.before,e),N.fn.append=q(e.append,e),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){N.fn[t]=function(t){for(var e,i=[],r=N(t),o=r.length-1,s=0;s<=o;s++)e=s===o?this:this.clone(!0),N(r[s])[n](e),u.apply(i,e.get());return this.pushStack(i)}}),N}();return(N=q).fn.on=E(r.on,r),N.fn.off=E(r.off,r),N.fn.trigger=E(r.trigger,r),"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error transitionEnd".split(" ").forEach(function(t){N.fn[t]=function(n,e){return 0 in arguments?this.on(t,n,e):this.trigger(t)}}),N.fn.one=function(t,e,i,r){return n.isString(e)||n.isFunction(r)||(r=i,i=e,e=null),n.isFunction(i)&&(r=i,i=null),this.on(t,e,i,r,1)},N.fn.animate=E(c.animate,c),N.fn.emulateTransitionEnd=E(c.emulateTransitionEnd,c),N.fn.show=E(c.show,c),N.fn.hide=E(c.hide,c),N.fn.toogle=E(c.toogle,c),N.fn.fadeTo=E(c.fadeTo,c),N.fn.fadeIn=E(c.fadeIn,c),N.fn.fadeOut=E(c.fadeOut,c),N.fn.fadeToggle=E(c.fadeToggle,c),N.fn.slideDown=E(c.slideDown,c),N.fn.slideToggle=E(c.slideToggle,c),N.fn.slideUp=E(c.slideUp,c),N.fn.scrollParent=function(t){var n=this.css("position"),e="absolute"===n,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=N(this);return(!e||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&r.length?r:N(this[0].ownerDocument||document)},function(t){t.fn.end=function(){return this.prevObject||t()},t.fn.andSelf=function(){return this.add(this.prevObject||t())},t.fn.addBack=function(t){return this.prevObject?t?this.add(this.prevObject.filter(t)):this.add(this.prevObject):this},"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings".split(",").forEach(function(n){var e=t.fn[n];t.fn[n]=function(){var t=e.apply(this,arguments);return t.prevObject=this,t}})}(q),function(t){var i;t.fn.query=t.fn.find,t.fn.place=function(t,i){return n.isString(t)?t=o.descendant(t):l(t)&&(t=t[0]),this.each(function(n,r){switch(i){case"before":e.before(t,r);break;case"after":e.after(t,r);break;case"replace":e.replace(t,r);break;case"only":e.empty(t),e.append(t,r);break;case"first":e.prepend(t,r);break;default:e.append(t,r)}})},t.fn.addContent=function(t,e){return t.template&&(t=n.substitute(t.template,t)),this.append(t)},t.fn.replaceClass=function(t,n){return this.removeClass(n),this.addClass(t),this},t.fn.replaceClass=function(t,n){return this.removeClass(n),this.addClass(t),this},t.fn.disableSelection=(i="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(i+".ui-disableSelection",function(t){t.preventDefault()})}),t.fn.enableSelection=function(){return this.off(".ui-disableSelection")}}(q),q.fn.plugin=function(t,n){var e=h.call(arguments,1),i=this,r=this;return this.each(function(){r=plugins.instantiate.apply(i,[this,t].concat(e))}),r},t.query=q});
//# sourceMappingURL=sourcemaps/query.js.map
