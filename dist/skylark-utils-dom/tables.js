/**
 * skylark-utils-dom - An Elegant HTML5 DOM utility Library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./dom","./langx","./query"],function(t,e,n){function r(){return r}function a(t,e){return t.find("td, th").each(function(t,r){var a;return(a=n(r)).replaceWith("<"+e+">"+a.html()+"</"+e+">")})}function d(t,e){var r,a;r=(a=n(t).closest(".simditor-table")).next("p"),a.remove(),e&&e(r)}function i(t){return setTimeout(function(){var e,r;return r=t.width(),e=t.find("col"),t.find("thead tr th").each(function(t,a){return e.eq(t).attr("width",n(a).outerWidth()/r*100+"%")})},0)}function o(t){var e=n(t);if(e.parent(".simditor-table").length>0)return e.parent().replaceWith(e)[0]}return e.mixin(r,{createTable:function(t,e,r){var a,d,i,o,h,f,l,p,c,u;for(a=n("<table/>"),o=n("<thead/>").appendTo(a),d=n("<tbody/>").appendTo(a),p=f=0,c=t;0<=c?f<c:f>c;p=0<=c?++f:--f)for((h=n("<tr/>")).appendTo(0===p?o:d),l=0,u=e;0<=u?l<u:l>u;0<=u?++l:--l)i=n(0===p?"<th/>":"<td/>").appendTo(h),r&&i.append(r);return a[0]},decorate:function(t,e){var r,d,h,f,l,p=n(t);return p.parent("."+e.tableDecorate).length>0&&o(t),p.wrap('<div class="'+e.tableDecorate+'"></div>'),l=p.parent("."+e.tableDecorate),r=p.find("colgroup"),p.find("thead").length<1&&(f=n("<thead />"),d=p.find("tr").first(),f.append(d),a(d,"th"),(h=p.find("tbody")).length>0?h.before(f):p.prepend(f)),r.length<1&&(r=n("<colgroup/>").prependTo(p),p.find("thead tr th").each(function(t,e){return n("<col/>").appendTo(r)}),i(p)),n("<div />",{class:e.resizeHandle,contenteditable:"false"}).appendTo(l),p.parent()},deleteCol:function(t,e){var r,a,o,h,f,l,p=n(t);if(l=(o=p.parent("tr")).closest("table").find("tr").length<2,f=p.siblings("td, th").length<1,l&&f)return d(t);h=o.find("td, th").index(p),(r=p.next("td, th")).length>0||(r=o.prev("td, th")),(a=o.closest("table")).find("col").eq(h).remove(),a.find("tr").each(function(t,e){return n(e).find("td, th").eq(h).remove()}),i(a),e&&e(r[0])},deleteRow:function(t,e){var r,i,o,h=n(t);if((i=h.parent("tr")).closest("table").find("tr").length<1)return d(t);(r=function(t){var e;return(e=t.next("tr")).length<1&&t.parent("thead").length>0&&(e=t.parent("thead").next("tbody").find("tr:first")),e}(i)).length>0||(r=function(t){var e;return(e=t.prev("tr")).length<1&&t.parent("tbody").length>0&&(e=t.parent("tbody").prev("thead").find("tr")),e}(i)),o=i.find("td, th").index(h),i.parent().is("thead")&&(r.appendTo(i.parent()),a(r,"th")),i.remove(),e&&e(r[0],o)},deleteTable:d,insertCol:function(t,e,r,a){var d,o,h,f,l,p,c,u,s=n(t);null==e&&(e="after"),l=s.parent("tr"),p=l.find("td, th").index(s),d=(f=s.closest("table")).find("col").eq(p),f.find("tr").each(function(t,a){var d,i;return i=n(a).parent().is("thead")?"th":"td",d=n("<"+i+"/>").append(r),n(a).find("td, th").eq(p)[e](d)}),o=n("<col/>"),d[e](o),c=f.width(),u=Math.max(parseFloat(d.attr("width"))/2,50/c*100),d.attr("width",u+"%"),o.attr("width",u+"%"),i(f),h="after"===e?s.next("td, th"):s.prev("td, th"),a&&a(h[0])},insertRow:function(t,e,r,d){var i,o,h,f,l,p,c,u,s=n(t);for(null==e&&(e="after"),o=(h=s.parent("tr")).closest("table"),l=0,o.find("tr").each(function(t,e){return l=Math.max(l,n(e).find("td").length)}),p=h.find("td, th").index(s),i=n("<tr/>"),f="td","after"===e&&h.parent().is("thead")?h.parent().next("tbody").prepend(i):"before"===e&&h.parent().is("thead")?(h.before(i),h.parent().next("tbody").prepend(h),a(h,"td"),f="th"):h[e](i),c=1,u=l;1<=u?c<=u:c>=u;1<=u?++c:--c)n("<"+f+"/>").append(r).appendTo(i);d&&d(i[0],p)},refreshTableWidth:i,undecorate:o}),t.tables=r});
//# sourceMappingURL=sourcemaps/tables.js.map
