{"version":3,"sources":["query.js"],"names":["define","skylark","langx","noder","datax","eventer","finder","geom","styler","fx","wrapper_map","func","context","self","this","params","slice","call","arguments","result","map","elem","idx","apply","concat","query","uniq","wrapper_selector","last","selector","querySelector","filter","wrapper_selector_until","util","undefined","wrapper_every_act","each","wrapper_every_act_firstArgFunc","oldValueFunc","arg1","forEach","funcArg","wrapper_some_chk","some","wrapper_name_value","name","value","isPlainObject","isDefined","newValue","wrapper_value","isQ","Array","prototype","push","every","indexOf","sort","rquickExpr","isArrayLike","isString","isFunction","type","isArray","isObject","isWindow","isDocument","NodeList","compact","flatten","camelCase","dasherize","children","klass","klassName","init","match","nodes","node","props","doc","charAt","length","exec","createFragment","byId","ownerDoc","find","descendants","attr","wrapper_node_operation","html","argType","arg","object","$","ready","fn","mixin","el","i","get","toArray","size","remove","callback","not","element","matches","add","is","inArray","isHtmlNode","excludes","item","has","contains","eq","first","closest","parents","ancestors","parentsUntil","parent","contents","empty","pluck","property","pushStack","elms","ret","prevObject","show","replaceWith","newContent","before","wrap","structure","dom","clone","parentNode","index","wrapAll","cloneNode","wrappingElement","append","wrapInner","unwrap","document","createTextNode","childNodes","textContent","hide","toggle","setting","css","prev","prevAll","previousSibling","next","nextAll","nextSiblings","siblings","text","removeAttr","prop","removeProp","data","removeData","val","offset","pagePosition","style","hasClass","addClass","className","removeClass","toggleClass","scrollTop","scrollLeft","position","options","of","posit","relativePosition","offsetParent","detach","hover","fnOver","fnOut","mouseenter","mouseleave","width","height","clientSize","dimension","Dimension","replace","m","toUpperCase","margin","cb","me","marginExtents","left","right","top","bottom","mb","innerWidth","clientWidth","innerHeight","clientHeight","traverse","after","prepend","appendTo","prependTo","insertBefore","insertAfter","replaceAll","original","elems","insert","on","off","trigger","split","event","one","animate","toogle","fadeTo","fadeIn","fadeOut","fadeToggle","slideDown","slideToggle","slideUp","scrollParent","includeHidden","excludeStaticParent","overflowRegex","test","ownerDocument","end","andSelf","addBack","place","refNode","descendant","addContent","content","template","substitute","replaceClass","newClass","oldClass","disableSelection","eventType","createElement","preventDefault","enableSelection","plugin","args","returnValue","plugins","instantiate"],"mappings":"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","file":"../query.js","sourcesContent":["define([\r\n    \"./skylark\",\r\n    \"./langx\",\r\n    \"./noder\",\r\n    \"./datax\",\r\n    \"./eventer\",\r\n    \"./finder\",\r\n    \"./geom\",\r\n    \"./styler\",\r\n    \"./fx\"\r\n], function(skylark, langx, noder, datax, eventer, finder, geom, styler, fx) {\r\n    var some = Array.prototype.some,\r\n        push = Array.prototype.push,\r\n        every = Array.prototype.every,\r\n        concat = Array.prototype.concat,\r\n        slice = Array.prototype.slice,\r\n        map = Array.prototype.map,\r\n        filter = Array.prototype.filter,\r\n        forEach = Array.prototype.forEach,\r\n        indexOf = Array.prototype.indexOf,\r\n        sort = Array.prototype.sort,\r\n        isQ;\r\n\r\n    var rquickExpr = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;\r\n\r\n    var funcArg = langx.funcArg,\r\n        isArrayLike = langx.isArrayLike,\r\n        isString = langx.isString,\r\n        uniq = langx.uniq,\r\n        isFunction = langx.isFunction;\r\n\r\n    var type = langx.type,\r\n        isArray = langx.isArray,\r\n\r\n        isWindow = langx.isWindow,\r\n\r\n        isDocument = langx.isDocument,\r\n\r\n        isObject = langx.isObject,\r\n\r\n        isPlainObject = langx.isPlainObject,\r\n\r\n        compact = langx.compact,\r\n\r\n        flatten = langx.flatten,\r\n\r\n        camelCase = langx.camelCase,\r\n\r\n        dasherize = langx.dasherize,\r\n        children = finder.children;\r\n\r\n    function wrapper_map(func, context) {\r\n        return function() {\r\n            var self = this,\r\n                params = slice.call(arguments);\r\n            var result = langx.map(self, function(elem, idx) {\r\n                return func.apply(context, [elem].concat(params));\r\n            });\r\n            return query(uniq(result));\r\n        }\r\n    }\r\n\r\n    function wrapper_selector(func, context, last) {\r\n        return function(selector) {\r\n            var self = this,\r\n                params = slice.call(arguments);\r\n            var result = this.map(function(idx, elem) {\r\n                // if (elem.nodeType == 1) {\r\n                if (elem.querySelector) {\r\n                    return func.apply(context, last ? [elem] : [elem, selector]);\r\n                }\r\n            });\r\n            if (last && selector) {\r\n                return result.filter(selector);\r\n            } else {\r\n                return result;\r\n            }\r\n        }\r\n    }\r\n\r\n    function wrapper_selector_until(func, context, last) {\r\n        return function(util, selector) {\r\n            var self = this,\r\n                params = slice.call(arguments);\r\n            if (selector === undefined) {\r\n                selector = util;\r\n                util = undefined;\r\n            }\r\n            var result = this.map(function(idx, elem) {\r\n                // if (elem.nodeType == 1) {\r\n                if (elem.querySelector) {\r\n                    return func.apply(context, last ? [elem, util] : [elem, selector, util]);\r\n                }\r\n            });\r\n            if (last && selector) {\r\n                return result.filter(selector);\r\n            } else {\r\n                return result;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    function wrapper_every_act(func, context) {\r\n        return function() {\r\n            var self = this,\r\n                params = slice.call(arguments);\r\n            this.each(function(idx) {\r\n                func.apply(context, [this].concat(params));\r\n            });\r\n            return self;\r\n        }\r\n    }\r\n\r\n    function wrapper_every_act_firstArgFunc(func, context, oldValueFunc) {\r\n        return function(arg1) {\r\n            var self = this,\r\n                params = slice.call(arguments);\r\n            forEach.call(self, function(elem, idx) {\r\n                var newArg1 = funcArg(elem, arg1, idx, oldValueFunc(elem));\r\n                func.apply(context, [elem, arg1].concat(params.slice(1)));\r\n            });\r\n            return self;\r\n        }\r\n    }\r\n\r\n    function wrapper_some_chk(func, context) {\r\n        return function() {\r\n            var self = this,\r\n                params = slice.call(arguments);\r\n            return some.call(self, function(elem) {\r\n                return func.apply(context, [elem].concat(params));\r\n            });\r\n        }\r\n    }\r\n\r\n    function wrapper_name_value(func, context, oldValueFunc) {\r\n        return function(name, value) {\r\n            var self = this,\r\n                params = slice.call(arguments);\r\n\r\n            if (langx.isPlainObject(name) || langx.isDefined(value)) {\r\n                forEach.call(self, function(elem, idx) {\r\n                    var newValue;\r\n                    if (oldValueFunc) {\r\n                        newValue = funcArg(elem, value, idx, oldValueFunc(elem, name));\r\n                    } else {\r\n                        newValue = value\r\n                    }\r\n                    func.apply(context, [elem].concat(params));\r\n                });\r\n                return self;\r\n            } else {\r\n                if (self[0]) {\r\n                    return func.apply(context, [self[0], name]);\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    function wrapper_value(func, context, oldValueFunc) {\r\n        return function(value) {\r\n            var self = this;\r\n\r\n            if (langx.isDefined(value)) {\r\n                forEach.call(self, function(elem, idx) {\r\n                    var newValue;\r\n                    if (oldValueFunc) {\r\n                        newValue = funcArg(elem, value, idx, oldValueFunc(elem));\r\n                    } else {\r\n                        newValue = value\r\n                    }\r\n                    func.apply(context, [elem, newValue]);\r\n                });\r\n                return self;\r\n            } else {\r\n                if (self[0]) {\r\n                    return func.apply(context, [self[0]]);\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    var NodeList = langx.klass({\r\n        klassName: \"SkNodeList\",\r\n        init: function(selector, context) {\r\n            var self = this,\r\n                match, nodes, node, props;\r\n\r\n            if (selector) {\r\n                self.context = context = context || noder.doc();\r\n\r\n                if (isString(selector)) {\r\n                    // a html string or a css selector is expected\r\n                    self.selector = selector;\r\n\r\n                    if (selector.charAt(0) === \"<\" && selector.charAt(selector.length - 1) === \">\" && selector.length >= 3) {\r\n                        match = [null, selector, null];\r\n                    } else {\r\n                        match = rquickExpr.exec(selector);\r\n                    }\r\n\r\n                    if (match) {\r\n                        if (match[1]) {\r\n                            // if selector is html\r\n                            nodes = noder.createFragment(selector);\r\n\r\n                            if (langx.isPlainObject(context)) {\r\n                                props = context;\r\n                            }\r\n\r\n                        } else {\r\n                            node = finder.byId(match[2], noder.ownerDoc(context));\r\n\r\n                            if (node) {\r\n                                // if selector is id\r\n                                nodes = [node];\r\n                            }\r\n\r\n                        }\r\n                    } else {\r\n                        // if selector is css selector\r\n                        if (langx.isString(context)) {\r\n                            context = finder.find(context);\r\n                        }\r\n\r\n                        nodes = finder.descendants(context, selector);\r\n                    }\r\n                } else {\r\n                    if (isArray(selector)) {\r\n                        // a dom node array is expected\r\n                        nodes = selector;\r\n                    } else {\r\n                        // a dom node is expected\r\n                        nodes = [selector];\r\n                    }\r\n                    //self.add(selector, false);\r\n                }\r\n            }\r\n\r\n\r\n            if (nodes) {\r\n\r\n                push.apply(self, nodes);\r\n\r\n                if (props) {\r\n                    for ( var name  in props ) {\r\n                        // Properties of context are called as methods if possible\r\n                        if ( langx.isFunction( this[ name ] ) ) {\r\n                            this[ name ]( props[ name ] );\r\n                        } else {\r\n                            this.attr( name, props[ name ] );\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return self;\r\n        }\r\n    });\r\n\r\n    var query = (function() {\r\n        isQ = function(object) {\r\n            return object instanceof NodeList;\r\n        }\r\n        init = function(selector, context) {\r\n            return new NodeList(selector, context);\r\n        }\r\n\r\n        var $ = function(selector, context) {\r\n            if (isFunction(selector)) {\r\n                eventer.ready(function() {\r\n                    selector($);\r\n                });\r\n            } else if (isQ(selector)) {\r\n                return selector;\r\n            } else {\r\n                if (context && isQ(context) && isString(selector)) {\r\n                    return context.find(selector);\r\n                }\r\n                return init(selector, context);\r\n            }\r\n        };\r\n\r\n        $.fn = NodeList.prototype;\r\n        langx.mixin($.fn, {\r\n            // `map` and `slice` in the jQuery API work differently\r\n            // from their array counterparts\r\n            length : 0,\r\n\r\n            map: function(fn) {\r\n                return $(uniq(langx.map(this, function(el, i) {\r\n                    return fn.call(el, i, el)\r\n                })));\r\n            },\r\n\r\n            slice: function() {\r\n                return $(slice.apply(this, arguments))\r\n            },\r\n\r\n            forEach: function() {\r\n                return forEach.apply(this,arguments);\r\n            },\r\n\r\n            get: function(idx) {\r\n                return idx === undefined ? slice.call(this) : this[idx >= 0 ? idx : idx + this.length]\r\n            },\r\n\r\n            indexOf: function() {\r\n                return indexOf.apply(this,arguments);\r\n            },\r\n\r\n            sort : function() {\r\n                return sort.apply(this,arguments);\r\n            },\r\n\r\n            toArray: function() {\r\n                return slice.call(this);\r\n            },\r\n\r\n            size: function() {\r\n                return this.length\r\n            },\r\n\r\n            remove: wrapper_every_act(noder.remove, noder),\r\n\r\n            each: function(callback) {\r\n                langx.each(this, callback);\r\n                return this;\r\n            },\r\n\r\n            filter: function(selector) {\r\n                if (isFunction(selector)) return this.not(this.not(selector))\r\n                return $(filter.call(this, function(element) {\r\n                    return finder.matches(element, selector)\r\n                }))\r\n            },\r\n\r\n            add: function(selector, context) {\r\n                return $(uniq(this.toArray().concat($(selector, context).toArray())));\r\n            },\r\n\r\n            is: function(selector) {\r\n                if (this.length > 0) {\r\n                    var self = this;\r\n                    if (langx.isString(selector)) {\r\n                        return some.call(self,function(elem) {\r\n                            return finder.matches(elem, selector);\r\n                        });\r\n                    } else if (langx.isArrayLike(selector)) {\r\n                       return some.call(self,function(elem) {\r\n                            return langx.inArray(elem, selector) > -1;\r\n                        });\r\n                    } else if (langx.isHtmlNode(selector)) {\r\n                       return some.call(self,function(elem) {\r\n                            return elem ==  selector;\r\n                        });\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            \r\n            not: function(selector) {\r\n                var nodes = []\r\n                if (isFunction(selector) && selector.call !== undefined)\r\n                    this.each(function(idx) {\r\n                        if (!selector.call(this, idx)) nodes.push(this)\r\n                    })\r\n                else {\r\n                    var excludes = typeof selector == 'string' ? this.filter(selector) :\r\n                        (isArrayLike(selector) && isFunction(selector.item)) ? slice.call(selector) : $(selector)\r\n                    this.forEach(function(el) {\r\n                        if (excludes.indexOf(el) < 0) nodes.push(el)\r\n                    })\r\n                }\r\n                return $(nodes)\r\n            },\r\n\r\n            has: function(selector) {\r\n                return this.filter(function() {\r\n                    return isObject(selector) ?\r\n                        noder.contains(this, selector) :\r\n                        $(this).find(selector).size()\r\n                })\r\n            },\r\n\r\n            eq: function(idx) {\r\n                return idx === -1 ? this.slice(idx) : this.slice(idx, +idx + 1);\r\n            },\r\n\r\n            first: function() {\r\n                return this.eq(0);\r\n            },\r\n\r\n            last: function() {\r\n                return this.eq(-1);\r\n            },\r\n\r\n            find: wrapper_selector(finder.descendants, finder),\r\n\r\n            closest: wrapper_selector(finder.closest, finder),\r\n            /*\r\n                        closest: function(selector, context) {\r\n                            var node = this[0],\r\n                                collection = false\r\n                            if (typeof selector == 'object') collection = $(selector)\r\n                            while (node && !(collection ? collection.indexOf(node) >= 0 : finder.matches(node, selector)))\r\n                                node = node !== context && !isDocument(node) && node.parentNode\r\n                            return $(node)\r\n                        },\r\n            */\r\n\r\n\r\n            parents: wrapper_selector(finder.ancestors, finder),\r\n\r\n            parentsUntil: wrapper_selector_until(finder.ancestors, finder),\r\n\r\n\r\n            parent: wrapper_selector(finder.parent, finder),\r\n\r\n            children: wrapper_selector(finder.children, finder),\r\n\r\n            contents: wrapper_map(noder.contents, noder),\r\n\r\n            empty: wrapper_every_act(noder.empty, noder),\r\n\r\n            // `pluck` is borrowed from Prototype.js\r\n            pluck: function(property) {\r\n                return langx.map(this, function(el) {\r\n                    return el[property]\r\n                })\r\n            },\r\n\r\n            pushStack : function(elms) {\r\n                var ret = $(elms);\r\n                ret.prevObject = this;\r\n                return ret;\r\n            },\r\n            \r\n            show: wrapper_every_act(fx.show, fx),\r\n\r\n            replaceWith: function(newContent) {\r\n                return this.before(newContent).remove();\r\n            },\r\n\r\n            wrap: function(structure) {\r\n                var func = isFunction(structure)\r\n                if (this[0] && !func)\r\n                    var dom = $(structure).get(0),\r\n                        clone = dom.parentNode || this.length > 1\r\n\r\n                return this.each(function(index) {\r\n                    $(this).wrapAll(\r\n                        func ? structure.call(this, index) :\r\n                        clone ? dom.cloneNode(true) : dom\r\n                    )\r\n                })\r\n            },\r\n\r\n            wrapAll: function(wrappingElement) {\r\n                if (this[0]) {\r\n                    $(this[0]).before(wrappingElement = $(wrappingElement));\r\n                    var children;\r\n                    // drill down to the inmost element\r\n                    while ((children = wrappingElement.children()).length) {\r\n                        wrappingElement = children.first();\r\n                    }\r\n                    $(wrappingElement).append(this);\r\n                }\r\n                return this\r\n            },\r\n\r\n            wrapInner: function(wrappingElement) {\r\n                var func = isFunction(wrappingElement)\r\n                return this.each(function(index) {\r\n                    var self = $(this),\r\n                        contents = self.contents(),\r\n                        dom = func ? wrappingElement.call(this, index) : wrappingElement\r\n                    contents.length ? contents.wrapAll(dom) : self.append(dom)\r\n                })\r\n            },\r\n\r\n            unwrap: function(selector) {\r\n                if (this.parent().children().length === 0) {\r\n                    // remove dom without text\r\n                    this.parent(selector).not(\"body\").each(function() {\r\n                        $(this).replaceWith(document.createTextNode(this.childNodes[0].textContent));\r\n                    });\r\n                } else {\r\n                    this.parent().each(function() {\r\n                        $(this).replaceWith($(this).children())\r\n                    });\r\n                }\r\n                return this\r\n            },\r\n\r\n            clone: function() {\r\n                return this.map(function() {\r\n                    return this.cloneNode(true)\r\n                })\r\n            },\r\n\r\n            hide: wrapper_every_act(fx.hide, fx),\r\n\r\n            toggle: function(setting) {\r\n                return this.each(function() {\r\n                    var el = $(this);\r\n                    (setting === undefined ? el.css(\"display\") == \"none\" : setting) ? el.show(): el.hide()\r\n                })\r\n            },\r\n\r\n            prev: function(selector) {\r\n                return $(this.pluck('previousElementSibling')).filter(selector || '*')\r\n            },\r\n\r\n            prevAll: wrapper_selector(finder.previousSibling, finder),\r\n\r\n            next: function(selector) {\r\n                return $(this.pluck('nextElementSibling')).filter(selector || '*')\r\n            },\r\n\r\n            nextAll: wrapper_selector(finder.nextSiblings, finder),\r\n\r\n            siblings: wrapper_selector(finder.siblings, finder),\r\n\r\n            html: wrapper_value(noder.html, noder, noder.html),\r\n\r\n            text: wrapper_value(datax.text, datax, datax.text),\r\n\r\n            attr: wrapper_name_value(datax.attr, datax, datax.attr),\r\n\r\n            removeAttr: wrapper_every_act(datax.removeAttr, datax),\r\n\r\n            prop: wrapper_name_value(datax.prop, datax, datax.prop),\r\n\r\n            removeProp: wrapper_every_act(datax.removeProp, datax),\r\n\r\n            data: wrapper_name_value(datax.data, datax, datax.data),\r\n\r\n            removeData: wrapper_every_act(datax.removeData, datax),\r\n\r\n            val: wrapper_value(datax.val, datax, datax.val),\r\n\r\n            offset: wrapper_value(geom.pagePosition, geom, geom.pagePosition),\r\n\r\n            style: wrapper_name_value(styler.css, styler),\r\n\r\n            css: wrapper_name_value(styler.css, styler),\r\n\r\n            index: function(elem) {\r\n                if (elem) {\r\n                    return this.indexOf($(elem)[0]);\r\n                } else {\r\n                    return this.parent().children().indexOf(this[0]);\r\n                }\r\n            },\r\n\r\n            //hasClass(name)\r\n            hasClass: wrapper_some_chk(styler.hasClass, styler),\r\n\r\n            //addClass(name)\r\n            addClass: wrapper_every_act_firstArgFunc(styler.addClass, styler, styler.className),\r\n\r\n            //removeClass(name)\r\n            removeClass: wrapper_every_act_firstArgFunc(styler.removeClass, styler, styler.className),\r\n\r\n            //toogleClass(name,when)\r\n            toggleClass: wrapper_every_act_firstArgFunc(styler.toggleClass, styler, styler.className),\r\n\r\n            scrollTop: wrapper_value(geom.scrollTop, geom),\r\n\r\n            scrollLeft: wrapper_value(geom.scrollLeft, geom),\r\n\r\n            position: function(options) {\r\n                if (!this.length) return\r\n\r\n                if (options) {\r\n                    if (options.of && options.of.length) {\r\n                        options = langx.clone(options);\r\n                        options.of = options.of[0];\r\n                    }\r\n                    return this.each( function() {\r\n                        geom.posit(this,options);\r\n                    });\r\n                } else {\r\n                    var elem = this[0];\r\n\r\n                    return geom.relativePosition(elem);\r\n\r\n                }             \r\n            },\r\n\r\n            offsetParent: wrapper_map(geom.offsetParent, geom)\r\n        });\r\n\r\n        // for now\r\n        $.fn.detach = $.fn.remove;\r\n\r\n        $.fn.hover = function(fnOver, fnOut) {\r\n            return this.mouseenter(fnOver).mouseleave(fnOut || fnOver);\r\n        };\r\n\r\n        $.fn.size = wrapper_value(geom.size, geom);\r\n\r\n        $.fn.width = wrapper_value(geom.width, geom, geom.width);\r\n\r\n        $.fn.height = wrapper_value(geom.height, geom, geom.height);\r\n\r\n        $.fn.clientSize = wrapper_value(geom.clientSize, geom.clientSize);\r\n\r\n        ['width', 'height'].forEach(function(dimension) {\r\n            var offset, Dimension = dimension.replace(/./, function(m) {\r\n                return m[0].toUpperCase()\r\n            });\r\n\r\n            $.fn['outer' + Dimension] = function(margin, value) {\r\n                if (arguments.length) {\r\n                    if (typeof margin !== 'boolean') {\r\n                        value = margin;\r\n                        margin = false;\r\n                    }\r\n                } else {\r\n                    margin = false;\r\n                    value = undefined;\r\n                }\r\n\r\n                if (value === undefined) {\r\n                    var el = this[0];\r\n                    if (!el) {\r\n                        return undefined;\r\n                    }\r\n                    var cb = geom.size(el);\r\n                    if (margin) {\r\n                        var me = geom.marginExtents(el);\r\n                        cb.width = cb.width + me.left + me.right;\r\n                        cb.height = cb.height + me.top + me.bottom;\r\n                    }\r\n                    return dimension === \"width\" ? cb.width : cb.height;\r\n                } else {\r\n                    return this.each(function(idx, el) {\r\n                        var mb = {};\r\n                        var me = geom.marginExtents(el);\r\n                        if (dimension === \"width\") {\r\n                            mb.width = value;\r\n                            if (margin) {\r\n                                mb.width = mb.width - me.left - me.right\r\n                            }\r\n                        } else {\r\n                            mb.height = value;\r\n                            if (margin) {\r\n                                mb.height = mb.height - me.top - me.bottom;\r\n                            }\r\n                        }\r\n                        geom.size(el, mb);\r\n                    })\r\n\r\n                }\r\n            };\r\n        })\r\n\r\n        $.fn.innerWidth = wrapper_value(geom.clientWidth, geom, geom.clientWidth);\r\n\r\n        $.fn.innerHeight = wrapper_value(geom.clientHeight, geom, geom.clientHeight);\r\n\r\n        var traverseNode = noder.traverse;\r\n\r\n        function wrapper_node_operation(func, context, oldValueFunc) {\r\n            return function(html) {\r\n                var argType, nodes = langx.map(arguments, function(arg) {\r\n                    argType = type(arg)\r\n                    return argType == \"object\" || argType == \"array\" || arg == null ?\r\n                        arg : noder.createFragment(arg)\r\n                });\r\n                if (nodes.length < 1) {\r\n                    return this\r\n                }\r\n                this.each(function(idx) {\r\n                    func.apply(context, [this, nodes, idx > 0]);\r\n                });\r\n                return this;\r\n            }\r\n        }\r\n\r\n\r\n        $.fn.after = wrapper_node_operation(noder.after, noder);\r\n\r\n        $.fn.prepend = wrapper_node_operation(noder.prepend, noder);\r\n\r\n        $.fn.before = wrapper_node_operation(noder.before, noder);\r\n\r\n        $.fn.append = wrapper_node_operation(noder.append, noder);\r\n\r\n\r\n        langx.each( {\r\n            appendTo: \"append\",\r\n            prependTo: \"prepend\",\r\n            insertBefore: \"before\",\r\n            insertAfter: \"after\",\r\n            replaceAll: \"replaceWith\"\r\n        }, function( name, original ) {\r\n            $.fn[ name ] = function( selector ) {\r\n                var elems,\r\n                    ret = [],\r\n                    insert = $( selector ),\r\n                    last = insert.length - 1,\r\n                    i = 0;\r\n\r\n                for ( ; i <= last; i++ ) {\r\n                    elems = i === last ? this : this.clone( true );\r\n                    $( insert[ i ] )[ original ]( elems );\r\n\r\n                    // Support: Android <=4.0 only, PhantomJS 1 only\r\n                    // .get() because push.apply(_, arraylike) throws on ancient WebKit\r\n                    push.apply( ret, elems.get() );\r\n                }\r\n\r\n                return this.pushStack( ret );\r\n            };\r\n        } );\r\n\r\n/*\r\n        $.fn.insertAfter = function(html) {\r\n            $(html).after(this);\r\n            return this;\r\n        };\r\n\r\n        $.fn.insertBefore = function(html) {\r\n            $(html).before(this);\r\n            return this;\r\n        };\r\n\r\n        $.fn.appendTo = function(html) {\r\n            $(html).append(this);\r\n            return this;\r\n        };\r\n\r\n        $.fn.prependTo = function(html) {\r\n            $(html).prepend(this);\r\n            return this;\r\n        };\r\n\r\n        $.fn.replaceAll = function(selector) {\r\n            $(selector).replaceWith(this);\r\n            return this;\r\n        };\r\n*/\r\n        return $;\r\n    })();\r\n\r\n    (function($) {\r\n        $.fn.on = wrapper_every_act(eventer.on, eventer);\r\n\r\n        $.fn.off = wrapper_every_act(eventer.off, eventer);\r\n\r\n        $.fn.trigger = wrapper_every_act(eventer.trigger, eventer);\r\n\r\n        ('focusin focusout focus blur load resize scroll unload click dblclick ' +\r\n            'mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave ' +\r\n            'change select keydown keypress keyup error transitionEnd').split(' ').forEach(function(event) {\r\n            $.fn[event] = function(data, callback) {\r\n                return (0 in arguments) ?\r\n                    this.on(event, data, callback) :\r\n                    this.trigger(event)\r\n            }\r\n        });\r\n\r\n        $.fn.one = function(event, selector, data, callback) {\r\n            if (!langx.isString(selector) && !langx.isFunction(callback)) {\r\n                callback = data;\r\n                data = selector;\r\n                selector = null;\r\n            }\r\n\r\n            if (langx.isFunction(data)) {\r\n                callback = data;\r\n                data = null;\r\n            }\r\n\r\n            return this.on(event, selector, data, callback, 1)\r\n        };\r\n\r\n        $.fn.animate = wrapper_every_act(fx.animate, fx);\r\n\r\n        $.fn.show = wrapper_every_act(fx.show, fx);\r\n        $.fn.hide = wrapper_every_act(fx.hide, fx);\r\n        $.fn.toogle = wrapper_every_act(fx.toogle, fx);\r\n        $.fn.fadeTo = wrapper_every_act(fx.fadeTo, fx);\r\n        $.fn.fadeIn = wrapper_every_act(fx.fadeIn, fx);\r\n        $.fn.fadeOut = wrapper_every_act(fx.fadeOut, fx);\r\n        $.fn.fadeToggle = wrapper_every_act(fx.fadeToggle, fx);\r\n\r\n        $.fn.slideDown = wrapper_every_act(fx.slideDown, fx);\r\n        $.fn.slideToggle = wrapper_every_act(fx.slideToggle, fx);\r\n        $.fn.slideUp = wrapper_every_act(fx.slideUp, fx);\r\n\r\n        $.fn.scrollParent = function( includeHidden ) {\r\n            var position = this.css( \"position\" ),\r\n                excludeStaticParent = position === \"absolute\",\r\n                overflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/,\r\n                scrollParent = this.parents().filter( function() {\r\n                    var parent = $( this );\r\n                    if ( excludeStaticParent && parent.css( \"position\" ) === \"static\" ) {\r\n                        return false;\r\n                    }\r\n                    return overflowRegex.test( parent.css( \"overflow\" ) + parent.css( \"overflow-y\" ) +\r\n                        parent.css( \"overflow-x\" ) );\r\n                } ).eq( 0 );\r\n\r\n            return position === \"fixed\" || !scrollParent.length ?\r\n                $( this[ 0 ].ownerDocument || document ) :\r\n                scrollParent;\r\n        };\r\n    })(query);\r\n\r\n\r\n    (function($) {\r\n        $.fn.end = function() {\r\n            return this.prevObject || $()\r\n        }\r\n\r\n        $.fn.andSelf = function() {\r\n            return this.add(this.prevObject || $())\r\n        }\r\n\r\n        $.fn.addBack = function(selector) {\r\n            if (this.prevObject) {\r\n                if (selector) {\r\n                    return this.add(this.prevObject.filter(selector));\r\n                } else {\r\n                    return this.add(this.prevObject);\r\n                }\r\n            } else {\r\n                return this;\r\n            }\r\n        }\r\n\r\n        'filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings'.split(',').forEach(function(property) {\r\n            var fn = $.fn[property]\r\n            $.fn[property] = function() {\r\n                var ret = fn.apply(this, arguments)\r\n                ret.prevObject = this\r\n                return ret\r\n            }\r\n        })\r\n    })(query);\r\n\r\n\r\n    (function($) {\r\n        $.fn.query = $.fn.find;\r\n\r\n        $.fn.place = function(refNode, position) {\r\n            // summary:\r\n            //      places elements of this node list relative to the first element matched\r\n            //      by queryOrNode. Returns the original NodeList. See: `dojo/dom-construct.place`\r\n            // queryOrNode:\r\n            //      may be a string representing any valid CSS3 selector or a DOM node.\r\n            //      In the selector case, only the first matching element will be used\r\n            //      for relative positioning.\r\n            // position:\r\n            //      can be one of:\r\n            //\r\n            //      -   \"last\" (default)\r\n            //      -   \"first\"\r\n            //      -   \"before\"\r\n            //      -   \"after\"\r\n            //      -   \"only\"\r\n            //      -   \"replace\"\r\n            //\r\n            //      or an offset in the childNodes\r\n            if (langx.isString(refNode)) {\r\n                refNode = finder.descendant(refNode);\r\n            } else if (isQ(refNode)) {\r\n                refNode = refNode[0];\r\n            }\r\n            return this.each(function(i, node) {\r\n                switch (position) {\r\n                    case \"before\":\r\n                        noder.before(refNode, node);\r\n                        break;\r\n                    case \"after\":\r\n                        noder.after(refNode, node);\r\n                        break;\r\n                    case \"replace\":\r\n                        noder.replace(refNode, node);\r\n                        break;\r\n                    case \"only\":\r\n                        noder.empty(refNode);\r\n                        noder.append(refNode, node);\r\n                        break;\r\n                    case \"first\":\r\n                        noder.prepend(refNode, node);\r\n                        break;\r\n                        // else fallthrough...\r\n                    default: // aka: last\r\n                        noder.append(refNode, node);\r\n                }\r\n            });\r\n        };\r\n\r\n        $.fn.addContent = function(content, position) {\r\n            if (content.template) {\r\n                content = langx.substitute(content.template, content);\r\n            }\r\n            return this.append(content);\r\n        };\r\n\r\n        $.fn.replaceClass = function(newClass, oldClass) {\r\n            this.removeClass(oldClass);\r\n            this.addClass(newClass);\r\n            return this;\r\n        };\r\n\r\n        $.fn.replaceClass = function(newClass, oldClass) {\r\n            this.removeClass(oldClass);\r\n            this.addClass(newClass);\r\n            return this;\r\n        };\r\n\r\n        $.fn.disableSelection = ( function() {\r\n            var eventType = \"onselectstart\" in document.createElement( \"div\" ) ?\r\n                \"selectstart\" :\r\n                \"mousedown\";\r\n\r\n            return function() {\r\n                return this.on( eventType + \".ui-disableSelection\", function( event ) {\r\n                    event.preventDefault();\r\n                } );\r\n            };\r\n        } )();\r\n\r\n        $.fn.enableSelection = function() {\r\n            return this.off( \".ui-disableSelection\" );\r\n        };\r\n       \r\n\r\n    })(query);\r\n\r\n    query.fn.plugin = function(name,options) {\r\n        var args = slice.call( arguments, 1 ),\r\n            self = this,\r\n            returnValue = this;\r\n\r\n        this.each(function(){\r\n            returnValue = plugins.instantiate.apply(self,[this,name].concat(args));\r\n        });\r\n        return returnValue;\r\n    };\r\n\r\n    return skylark.query = query;\r\n\r\n});"]}