/**
 * skylark-utils-dom - An Elegant HTML5 DOM utility Library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./dom","./langx","./browser","./geom","./styler","./eventer"],function(i,t,n,o,e,s){var r,a,c,l,p,d,u,g=n.normalizeCssEvent("AnimationEnd"),m=n.normalizeCssEvent("TransitionEnd"),f=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,h=n.css3PropPrefix+"transform",v={};function y(i,n,y,b,T,w){var x,z,B,C={},E=[],j="",O=this,k=!1,F=!1;if(t.isPlainObject(y)&&(b=y.easing,T=y.complete,w=y.delay,y=y.duration),t.isString(y)&&(y=I.speeds[y]),void 0===y&&(y=I.speeds.normal),y/=1e3,I.off&&(y=0),t.isFunction(b)?(T=b,eace="swing"):b=b||"swing",w?w/=1e3:w=0,t.isString(n))C[r]=n,C[a]=y+"s",C[c]=b,z=g;else{for(x in n){var S=n[x];if(f.test(x))j+=x+"("+S+") ";else{if("scrollTop"===x&&(F=!0),"clip"==x&&t.isPlainObject(S)){if(C[x]="rect("+S.top+"px,"+S.right+"px,"+S.bottom+"px,"+S.left+"px)","auto"==e.css(i,"clip")){var X=o.size(i);e.css(i,"clip","rect(0px,"+X.width+"px,"+X.height+"px,0px)"),!0}}else C[x]=S;E.push(t.dasherize(x))}}z=m}return j&&(C[h]=j,E.push(h)),y>0&&t.isPlainObject(n)&&(C[l]=E.join(", "),C[p]=y+"s",C[u]=w+"s",C[d]=b),B=function(t){if(k=!0,t){if(t.target!==t.currentTarget)return;s.off(t.target,z,B)}else s.off(i,g,B);e.css(i,v),T&&T.call(this)},y>0&&(s.on(i,z,B),t.debounce(function(){k||B.call(O)},1e3*(y+w)+25)()),i.clientLeft,e.css(i,C),y<=0&&t.debounce(function(){k||B.call(O)},0)(),F&&P(i,n.scrollTop,y,T),this}function b(i,n,o){return e.show(i),n&&(!o&&t.isFunction(n)&&(o=n,n="normal"),e.css(i,"opacity",0),y(i,{opacity:1,scale:"1,1"},n,o)),this}function T(i,n,o){return n?(!o&&t.isFunction(n)&&(o=n,n="normal"),y(i,{opacity:0,scale:"0,0"},n,function(){e.hide(i),o&&o.call(i)})):e.hide(i),this}function P(i,n,o,e){var s=parseInt(i.scrollTop),r=0,a=1e3*o/5,c=parseInt(n),l=setInterval(function(){++r<=a&&(i.scrollTop=(c-s)/a*r+s),r>=a+1&&(clearInterval(l),e&&t.debounce(e,1e3)())},5)}function w(i,t,n,o,e){return y(i,{opacity:n},t,o,e),this}function x(i,t,n,o){var s=e.css(i,"opacity");return s>0?e.css(i,"opacity",0):s=1,e.show(i),w(i,t,s,n,o),this}function z(i,n,o,s){var r,a=e.css(i,"opacity"),c={};return t.isPlainObject(n)?(c.easing=n.easing,c.duration=n.duration,r=n.complete):(c.duration=n,s?(r=s,c.easing=o):r=o),c.complete=function(){e.css(i,"opacity",a),e.hide(i),r&&r.call(i)},w(i,c,0),this}function B(i,t,n){var o=e.css(i,"position");b(i),e.css(i,{position:"absolute",visibility:"hidden"});var s=e.css(i,"margin-top"),r=e.css(i,"margin-bottom"),a=e.css(i,"padding-top"),c=e.css(i,"padding-bottom"),l=e.css(i,"height");return e.css(i,{position:o,visibility:"visible",overflow:"hidden",height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0}),y(i,{height:l,marginTop:s,marginBottom:r,paddingTop:a,paddingBottom:c},{duration:t,complete:function(){n&&n.apply(i)}}),this}function C(i,t,n){if(o.height(i)>0){e.css(i,"position");var s=e.css(i,"height"),r=e.css(i,"margin-top"),a=e.css(i,"margin-bottom"),c=e.css(i,"padding-top"),l=e.css(i,"padding-bottom");e.css(i,{visibility:"visible",overflow:"hidden",height:s,marginTop:r,marginBottom:a,paddingTop:c,paddingBottom:l}),y(i,{height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0},{duration:t,queue:!1,complete:function(){T(i),e.css(i,{visibility:"visible",overflow:"hidden",height:s,marginTop:r,marginBottom:a,paddingTop:c,paddingBottom:l}),n&&n.apply(i)}})}return this}function I(){return I}return v[r=n.normalizeCssProperty("animation-name")]=v[a=n.normalizeCssProperty("animation-duration")]=v[n.normalizeCssProperty("animation-delay")]=v[c=n.normalizeCssProperty("animation-timing-function")]="",v[l=n.normalizeCssProperty("transition-property")]=v[p=n.normalizeCssProperty("transition-duration")]=v[u=n.normalizeCssProperty("transition-delay")]=v[d=n.normalizeCssProperty("transition-timing-function")]="",t.mixin(I,{off:!1,speeds:{normal:400,fast:200,slow:600},animate:y,emulateTransitionEnd:function(i,t){var o=!1;return s.one("transitionEnd",function(){o=!0}),setTimeout(function(){o||s.trigger(el,n.support.transition.end)},t),this},fadeIn:x,fadeOut:z,fadeTo:w,fadeToggle:function(i,t,n,o){return e.isInvisible(i)?x(i,t,easing,callback):z(i,t,easing,callback),this},hide:T,scrollToTop:P,slideDown:B,slideToggle:function(i,t,n){return 0==o.height(i)?B(i,t,n):C(i,t,n),this},slideUp:C,show:b,toggle:function(i,t,n){return e.isInvisible(i)?b(i,t,n):T(i,t,n),this}}),i.fx=I});
//# sourceMappingURL=sourcemaps/fx.js.map
