/**
 * skylark-utils-dom - An Elegant HTML5 DOM utility Library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./dom","./langx","./browser","./geom","./styler","./eventer"],function(i,t,n,o,s,e){var a,r,c,l,p,d,g,m=n.normalizeCssEvent("AnimationEnd"),u=n.normalizeCssEvent("TransitionEnd"),f=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,h=n.css3PropPrefix+"transform",v={};function y(i,n,y,b,T,w){var x,z,B,C={},j=[],O="",E=this,k=!1,F=!1;if(t.isPlainObject(y)&&(b=y.easing,T=y.complete,w=y.delay,y=y.duration),t.isString(y)&&(y=I.speeds[y]),void 0===y&&(y=I.speeds.normal),y/=1e3,I.off&&(y=0),t.isFunction(b)?(T=b,eace="swing"):b=b||"swing",w?w/=1e3:w=0,t.isString(n))C[a]=n,C[r]=y+"s",C[c]=b,z=m;else{for(x in n){var S=n[x];if(f.test(x))O+=x+"("+S+") ";else{if("scrollTop"===x&&(F=!0),"clip"==x&&t.isPlainObject(S)){if(C[x]="rect("+S.top+"px,"+S.right+"px,"+S.bottom+"px,"+S.left+"px)","auto"==s.css(i,"clip")){var X=o.size(i);s.css(i,"clip","rect(0px,"+X.width+"px,"+X.height+"px,0px)"),!0}}else C[x]=S;j.push(t.dasherize(x))}}z=u}return O&&(C[h]=O,j.push(h)),y>0&&t.isPlainObject(n)&&(C[l]=j.join(", "),C[p]=y+"s",C[g]=w+"s",C[d]=b),B=function(t){if(k=!0,t){if(t.target!==t.currentTarget)return;e.off(t.target,z,B)}else e.off(i,m,B);s.css(i,v),T&&T.call(this)},y>0&&(e.on(i,z,B),t.debounce(function(){k||B.call(E)},1e3*(y+w)+25)()),i.clientLeft,s.css(i,C),y<=0&&t.debounce(function(){k||B.call(E)},0)(),F&&P(i,n.scrollTop,y,T),this}function b(i,n,o){return s.show(i),n&&(!o&&t.isFunction(n)&&(o=n,n="normal"),s.css(i,"opacity",0),y(i,{opacity:1,scale:"1,1"},n,o)),this}function T(i,n,o){return n?(!o&&t.isFunction(n)&&(o=n,n="normal"),y(i,{opacity:0,scale:"0,0"},n,function(){s.hide(i),o&&o.call(i)})):s.hide(i),this}function P(i,n,o,s){var e=parseInt(i.scrollTop),a=0,r=1e3*o/5,c=parseInt(n),l=setInterval(function(){++a<=r&&(i.scrollTop=(c-e)/r*a+e),a>=r+1&&(clearInterval(l),s&&t.debounce(s,1e3)())},5)}function w(i,t,n,o,s){return y(i,{opacity:n},t,o,s),this}function x(i,t,n,o){var e=s.css(i,"opacity");return e>0?s.css(i,"opacity",0):e=1,s.show(i),w(i,t,e,n,o),this}function z(i,n,o,e){var a,r=s.css(i,"opacity"),c={};return t.isPlainObject(n)?(c.easing=n.easing,c.duration=n.duration,a=n.complete):(c.duration=n,e?(a=e,c.easing=o):a=o),c.complete=function(){s.css(i,"opacity",r),s.hide(i),a&&a.call(i)},w(i,c,0),this}function B(i,t,n){var o=s.css(i,"position");b(i),s.css(i,{position:"absolute",visibility:"hidden"});var e=s.css(i,"margin-top"),a=s.css(i,"margin-bottom"),r=s.css(i,"padding-top"),c=s.css(i,"padding-bottom"),l=s.css(i,"height");return s.css(i,{position:o,visibility:"visible",overflow:"hidden",height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0}),y(i,{height:l,marginTop:e,marginBottom:a,paddingTop:r,paddingBottom:c},{duration:t,complete:function(){n&&n.apply(i)}}),this}function C(i,t,n){if(o.height(i)>0){s.css(i,"position");var e=s.css(i,"height"),a=s.css(i,"margin-top"),r=s.css(i,"margin-bottom"),c=s.css(i,"padding-top"),l=s.css(i,"padding-bottom");s.css(i,{visibility:"visible",overflow:"hidden",height:e,marginTop:a,marginBottom:r,paddingTop:c,paddingBottom:l}),y(i,{height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0},{duration:t,queue:!1,complete:function(){T(i),s.css(i,{visibility:"visible",overflow:"hidden",height:e,marginTop:a,marginBottom:r,paddingTop:c,paddingBottom:l}),n&&n.apply(i)}})}return this}function I(){return I}return v[a=n.normalizeCssProperty("animation-name")]=v[r=n.normalizeCssProperty("animation-duration")]=v[n.normalizeCssProperty("animation-delay")]=v[c=n.normalizeCssProperty("animation-timing-function")]="",v[l=n.normalizeCssProperty("transition-property")]=v[p=n.normalizeCssProperty("transition-duration")]=v[g=n.normalizeCssProperty("transition-delay")]=v[d=n.normalizeCssProperty("transition-timing-function")]="",t.mixin(I,{off:!1,speeds:{normal:400,fast:200,slow:600},animate:y,fadeIn:x,fadeOut:z,fadeTo:w,fadeToggle:function(i,t,n,o){return s.isInvisible(i)?x(i,t,easing,callback):z(i,t,easing,callback),this},hide:T,scrollToTop:P,slideDown:B,slideToggle:function(i,t,n){return 0==o.height(i)?B(i,t,n):C(i,t,n),this},slideUp:C,show:b,toggle:function(i,t,n){return s.isInvisible(i)?b(i,t,n):T(i,t,n),this}}),i.fx=I});
//# sourceMappingURL=sourcemaps/fx.js.map
