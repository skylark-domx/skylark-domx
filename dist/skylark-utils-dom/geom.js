/**
 * skylark-utils-dom - An Elegant HTML5 DOM utility Library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./skylark","./langx","./noder","./styler"],function(t,e,i,o){function n(){if(void 0!==R)return R;var t,e,n=i.createFragment("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>")[0],l=n.childNodes[0];return i.append(document.body,n),t=l.offsetWidth,o.css(n,"overflow","scroll"),e=l.offsetWidth,t===e&&(e=n[0].clientWidth),i.remove(n),R=t-e}function l(t){var e=getComputedStyle(t);return{left:C(e.borderLeftWidth,t),top:C(e.borderTopWidth,t),right:C(e.borderRightWidth,t),bottom:C(e.borderBottomWidth,t)}}function h(t,e){if(void 0===e)return B.test(t.nodeName)?{top:0,left:0}:t.getBoundingClientRect();var i=D(t),o=h(i),n=a(t),r=l(i);return b(t,{top:e.top-o.top-n.top-r.top,left:e.left-o.left-n.left-r.left}),this}function r(t,e){return void 0===e?t.getBoundingClientRect():(h(t,e),L(t,e),this)}function f(t,e){return void 0==e?s(t).height:s(t,{height:e})}function s(t,e){if(void 0==e)return{width:t.clientWidth,height:t.clientHeight};var i="border-box"===o.css(t,"box-sizing"),n={width:e.width,height:e.height};if(i){var h=l(t);void 0!==n.width&&(n.width=n.width+h.left+h.right),void 0!==n.height&&(n.height=n.height+h.top+h.bottom)}else{var r=w(t);void 0!==n.width&&(n.width=n.width-r.left-r.right),void 0!==n.height&&(n.height=n.height-r.top-r.bottom)}return o.css(t,n),this}function d(t,e){return void 0==e?s(t).width:(s(t,{width:e}),this)}function c(t){var e=s(t),i=w(t);return{left:i.left,top:i.top,width:e.width-i.left-i.right,height:e.height-i.top-i.bottom}}function g(t){var e=t.documentElement,i=t.body,o=Math.max,n=o(e.scrollWidth,i.scrollWidth),l=o(e.clientWidth,i.clientWidth),h=o(e.offsetWidth,i.offsetWidth),r=o(e.scrollHeight,i.scrollHeight),f=o(e.clientHeight,i.clientHeight),s=o(e.offsetHeight,i.offsetHeight);return{width:n<h?l:n,height:r<s?f:r}}function p(t,e){return void 0==e?L(t).height:(L(t,{height:e}),this)}function a(t){var e=getComputedStyle(t);return{left:C(e.marginLeft),top:C(e.marginTop),right:C(e.marginRight),bottom:C(e.marginBottom)}}function u(t){var e=this.relativeRect(t),i=this.marginExtents(t);return{left:e.left,top:e.top,width:e.width+i.left+i.right,height:e.height+i.top+i.bottom}}function m(t){var e=this.size(t),i=this.marginExtents(t);return{width:e.width+i.left+i.right,height:e.height+i.top+i.bottom}}function w(t){var e=getComputedStyle(t);return{left:C(e.paddingLeft),top:C(e.paddingTop),right:C(e.paddingRight),bottom:C(e.paddingBottom)}}function v(t,e){if(void 0===e){var i=t.getBoundingClientRect();return{left:i.left+window.pageXOffset,top:i.top+window.pageYOffset}}var o=D(t),n=v(o),h=a(t),r=l(o);return b(t,{top:e.top-n.top-h.top-r.top,left:e.left-n.left-h.left-r.left}),this}function W(t,e){if(void 0===e){var i=t.getBoundingClientRect();return{left:i.left+window.pageXOffset,top:i.top+window.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}}return v(t,e),L(t,e),this}function b(t,e){if(void 0==e){var i=D(t),n=h(t),r=h(i),f=(a(t),l(i));return{top:n.top-r.top-f.top,left:n.left-r.left-f.left}}var s={top:e.top,left:e.left};return"static"==o.css(t,"position")&&(s.position="relative"),o.css(t,s),this}function y(t,e){if(void 0===e){var i=D(t),o=r(t),n=h(i),f=(a(t),l(i));return{top:o.top-n.top-f.top,left:o.left-n.left-f.left,width:o.width,height:o.height}}return b(t,e),L(t,e),this}function x(t,e){function i(t,e){var i,o,n=t;for(i=o=0;n&&n!=e&&n.nodeType;)i+=n.offsetLeft||0,o+=n.offsetTop||0,n=n.offsetParent;return{x:i,y:o}}var o,n,l,h,r,f,s=t.parentNode,d=i(t,s);return o=d.x,n=d.y,l=t.offsetWidth,h=t.offsetHeight,r=s.clientWidth,f=s.clientHeight,"end"==e?(o-=r-l,n-=f-h):"center"==e&&(o-=r/2-l/2,n-=f/2-h/2),s.scrollLeft=o,s.scrollTop=n,this}function H(t,e){var i="scrollLeft"in t;return void 0===e?i?t.scrollLeft:t.pageXOffset:(i?t.scrollLeft=e:t.scrollTo(e,t.scrollY),this)}function T(t,e){var i="scrollTop"in t;return void 0===e?i?t.scrollTop:t.pageYOffset:(i?t.scrollTop=e:t.scrollTo(t.scrollX,e),this)}function L(t,i){if(void 0==i)return e.isWindow(t)?{width:t.innerWidth,height:t.innerHeight}:e.isDocument(t)?g(document):{width:t.offsetWidth,height:t.offsetHeight};var n="border-box"===o.css(t,"box-sizing"),h={width:i.width,height:i.height};if(!n){var r=w(t),f=l(t);void 0!==h.width&&""!==h.width&&null!==h.width&&(h.width=h.width-r.left-r.right-f.left-f.right),void 0!==h.height&&""!==h.height&&null!==h.height&&(h.height=h.height-r.top-r.bottom-f.top-f.bottom)}return o.css(t,h),this}function z(t,e){return void 0==e?L(t).width:(L(t,{width:e}),this)}function P(){return P}var R,B=/^(?:body|html)$/i,C=e.toPixel,D=i.offsetParent;return e.mixin(P,{borderExtents:l,boundingPosition:h,boundingRect:r,clientHeight:f,clientSize:s,clientWidth:d,contentRect:c,getDocumentSize:g,height:p,marginExtents:a,marginRect:u,marginSize:m,offsetParent:D,paddingExtents:w,pagePosition:v,pageRect:W,relativePosition:b,relativeRect:y,scrollbarWidth:n,scrollIntoView:x,scrollLeft:H,scrollTop:T,size:L,width:z}),function(){function t(t,e,i){return[parseFloat(t[0])*(w.test(t[0])?e/100:1),parseFloat(t[1])*(w.test(t[1])?i/100:1)]}function l(t,e){return parseInt(o.css(t,e),10)||0}function h(t){return 9===t.nodeType?{size:L(t),offset:{top:0,left:0}}:i.isWindow(t)?{size:L(t),offset:{top:T(t),left:H(t)}}:t.preventDefault?{size:{width:0,height:0},offset:{top:t.pageY,left:t.pageX}}:{size:m(t),offset:offset(t)}}function r(t){var e=t.isWindow||t.isDocument?"":o.css(t.element,"overflow-x"),i=t.isWindow||t.isDocument?"":o.css(t.element,"overflow-y"),l="scroll"===e||"auto"===e&&t.width<scrollWidth(t.element),h="scroll"===i||"auto"===i&&t.height<scrollHeight(t.element);return{width:h?n():0,height:l?n():0}}function f(t){var e=t||window,o=i.isWindow(e),n=!!e&&9===e.nodeType,l=!o&&!n,h=m(e);return{element:e,isWindow:o,isDocument:n,offset:l?offset(t):{left:0,top:0},scrollLeft:H(e),scrollTop:T(e),width:h.width,height:h.height}}function s(i,o){o=e.extend({},o);var n,s,w,W,b,y,x=o.of,H=f(o.within),T=r(H),L=(o.collision||"flip").split(" "),z={};return y=h(x),x.preventDefault&&(o.at="left top"),s=y.size.width,w=y.size.height,W=y.offset,b=e.extend({},W),e.each(["my","at"],function(){var t,e,i=(o[this]||"").split(" ");1===i.length&&(i=g.test(i[0])?i.concat(["center"]):p.test(i[0])?["center"].concat(i):["center","center"]),i[0]=g.test(i[0])?i[0]:"center",i[1]=p.test(i[1])?i[1]:"center",t=a.exec(i[0]),e=a.exec(i[1]),z[this]=[t?t[0]:0,e?e[0]:0],o[this]=[u.exec(i[0])[0],u.exec(i[1])[0]]}),1===L.length&&(L[1]=L[0]),"right"===o.at[0]?b.left+=s:"center"===o.at[0]&&(b.left+=s/2),"bottom"===o.at[1]?b.top+=w:"center"===o.at[1]&&(b.top+=w/2),n=t(z.at,s,w),b.left+=n[0],b.top+=n[1],function(i){var h,r,f=m(i),g=f.width,p=f.height,a=l(i,"marginLeft"),u=l(i,"marginTop"),y=g+a+l(i,"marginRight")+T.width,P=p+u+l(i,"marginBottom")+T.height,R=e.extend({},b),B=t(z.my,f.width,f.height);"right"===o.my[0]?R.left-=g:"center"===o.my[0]&&(R.left-=g/2),"bottom"===o.my[1]?R.top-=p:"center"===o.my[1]&&(R.top-=p/2),R.left+=B[0],R.top+=B[1],h={marginLeft:a,marginTop:u},e.each(["left","top"],function(t,e){v[L[t]]&&v[L[t]][e](R,{targetWidth:s,targetHeight:w,elemWidth:g,elemHeight:p,collisionPosition:h,collisionWidth:y,collisionHeight:P,offset:[n[0]+B[0],n[1]+B[1]],my:o.my,at:o.at,within:H,elem:i})}),o.using&&(r=function(t){var e=W.left-R.left,n=e+s-g,l=W.top-R.top,h=l+w-p,r={target:{element:x,left:W.left,top:W.top,width:s,height:w},element:{element:i,left:R.left,top:R.top,width:g,height:p},horizontal:n<0?"left":e>0?"right":"center",vertical:h<0?"top":l>0?"bottom":"middle"};s<g&&c(e+n)<s&&(r.horizontal="center"),w<p&&c(l+h)<w&&(r.vertical="middle"),d(c(e),c(n))>d(c(l),c(h))?r.important="horizontal":r.important="vertical",o.using.call(this,t,r)}),offset(i,e.extend(R,{using:r}))}}var d=Math.max,c=Math.abs,g=/left|center|right/,p=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,w=/%$/,v={fit:{left:function(t,e){var i,o=e.within,n=o.isWindow?o.scrollLeft:o.offset.left,l=o.width,h=t.left-e.collisionPosition.marginLeft,r=n-h,f=h+e.collisionWidth-l-n;e.collisionWidth>l?r>0&&f<=0?(i=t.left+r+e.collisionWidth-l-n,t.left+=r-i):f>0&&r<=0?t.left=n:r>f?t.left=n+l-e.collisionWidth:t.left=n:r>0?t.left+=r:f>0?t.left-=f:t.left=d(t.left-h,t.left)},top:function(t,e){var i,o=e.within,n=o.isWindow?o.scrollTop:o.offset.top,l=e.within.height,h=t.top-e.collisionPosition.marginTop,r=n-h,f=h+e.collisionHeight-l-n;e.collisionHeight>l?r>0&&f<=0?(i=t.top+r+e.collisionHeight-l-n,t.top+=r-i):f>0&&r<=0?t.top=n:r>f?t.top=n+l-e.collisionHeight:t.top=n:r>0?t.top+=r:f>0?t.top-=f:t.top=d(t.top-h,t.top)}},flip:{left:function(t,e){var i,o,n=e.within,l=n.offset.left+n.scrollLeft,h=n.width,r=n.isWindow?n.scrollLeft:n.offset.left,f=t.left-e.collisionPosition.marginLeft,s=f-r,d=f+e.collisionWidth-h-r,g="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,a=-2*e.offset[0];s<0?(i=t.left+g+p+a+e.collisionWidth-h-l,(i<0||i<c(s))&&(t.left+=g+p+a)):d>0&&(o=t.left-e.collisionPosition.marginLeft+g+p+a-r,(o>0||c(o)<d)&&(t.left+=g+p+a))},top:function(t,e){var i,o,n=e.within,l=n.offset.top+n.scrollTop,h=n.height,r=n.isWindow?n.scrollTop:n.offset.top,f=t.top-e.collisionPosition.marginTop,s=f-r,d=f+e.collisionHeight-h-r,g="top"===e.my[1],p=g?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,a="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,u=-2*e.offset[1];s<0?(o=t.top+p+a+u+e.collisionHeight-h-l,(o<0||o<c(s))&&(t.top+=p+a+u)):d>0&&(i=t.top-e.collisionPosition.marginTop+p+a+u-r,(i>0||c(i)<d)&&(t.top+=p+a+u))}},flipfit:{left:function(){v.flip.left.apply(this,arguments),v.fit.left.apply(this,arguments)},top:function(){v.flip.top.apply(this,arguments),v.fit.top.apply(this,arguments)}}};P.posit=s}(),t.geom=P});
//# sourceMappingURL=sourcemaps/geom.js.map
